<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="560" viewBox="0 0 1200 560">
  <defs>
    <style>
      .box { fill: #ffffff; stroke: #111827; stroke-width: 2; rx: 18; ry: 18; }
      .title { font: 700 18px Arial, Helvetica, sans-serif; fill: #111827; }
      .text { font: 14px Arial, Helvetica, sans-serif; fill: #111827; }
      .small { font: 12px Arial, Helvetica, sans-serif; fill: #374151; }
      .arrow { stroke: #111827; stroke-width: 2.5; fill: none; marker-end: url(#arrowhead); }
      .dashed { stroke-dasharray: 7 7; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#111827"/>
    </marker>
  </defs>

  <!-- Title -->
  <text x="40" y="48" class="title">SVG → Robot Handwriting Pipeline (Dobot)</text>
  <text x="40" y="74" class="small">Vector strokes → normalized points → stroke execution → poem layout → Dobot SDK → physical writing</text>

  <!-- Boxes -->
  <!-- 1: SVG -->
  <rect x="60" y="120" width="240" height="110" class="box"/>
  <text x="80" y="155" class="title">SVG Glyph(s)</text>
  <text x="80" y="182" class="text">Vector strokes (polylines)</text>
  <text x="80" y="205" class="small">e.g., 一.svg, 春.svg, ...</text>

  <!-- 2: read.py -->
  <rect x="360" y="120" width="260" height="110" class="box"/>
  <text x="380" y="155" class="title">read.py</text>
  <text x="380" y="182" class="text">Parse points + stroke breaks</text>
  <text x="380" y="205" class="small">origin shift, scale (/450)</text>

  <!-- 3: char txt -->
  <rect x="680" y="120" width="260" height="110" class="box"/>
  <text x="700" y="155" class="title">char/&lt;CHAR&gt;.txt</text>
  <text x="700" y="182" class="text">Normalized point list</text>
  <text x="700" y="205" class="small">"s" separator between strokes</text>

  <!-- 4a: write_1.py -->
  <rect x="360" y="280" width="260" height="140" class="box"/>
  <text x="380" y="315" class="title">write_1.py</text>
  <text x="380" y="342" class="text">Stroke-level execution</text>
  <text x="380" y="368" class="small">Pen up → move to start</text>
  <text x="380" y="390" class="small">Pen down → trace points</text>
  <text x="380" y="412" class="small">Pen up → lift to safe Z</text>

  <!-- 4b: model_4.py -->
  <rect x="680" y="280" width="260" height="140" class="box"/>
  <text x="700" y="315" class="title">model_4.py</text>
  <text x="700" y="342" class="text">Poem/page orchestration</text>
  <text x="700" y="368" class="small">Grid layout (e.g., 4×7)</text>
  <text x="700" y="390" class="small">Load characters sequentially</text>
  <text x="700" y="412" class="small">Alignment correction (point.txt)</text>

  <!-- 5: SDK -->
  <rect x="980" y="220" width="180" height="140" class="box"/>
  <text x="1000" y="255" class="title">Dobot SDK</text>
  <text x="1000" y="282" class="text">DobotDllType</text>
  <text x="1000" y="304" class="small">ctypes + DobotDll.dll</text>
  <text x="1000" y="330" class="small">Queued PTP commands</text>

  <!-- 6: Robot -->
  <rect x="980" y="400" width="180" height="110" class="box"/>
  <text x="1000" y="435" class="title">Dobot Arm</text>
  <text x="1000" y="462" class="text">Physical handwriting</text>
  <text x="1000" y="485" class="small">Pen on paper</text>

  <!-- Arrows -->
  <path d="M300 175 L360 175" class="arrow"/>
  <path d="M620 175 L680 175" class="arrow"/>

  <!-- Branch from txt to write_1 and model_4 -->
  <path d="M810 230 L810 260" class="arrow"/>
  <path d="M810 260 L810 280" class="arrow"/>

  <path d="M810 230 L490 260" class="arrow dashed"/>
  <path d="M490 260 L490 280" class="arrow dashed"/>

  <!-- write_1 to SDK -->
  <path d="M620 350 L980 290" class="arrow"/>
  <!-- model_4 to SDK -->
  <path d="M940 350 L980 290" class="arrow"/>

  <!-- SDK to Robot -->
  <path d="M1070 360 L1070 400" class="arrow"/>

  <!-- Labels for branch -->
  <text x="500" y="260" class="small">single character</text>
  <text x="820" y="268" class="small">poem / page</text>
</svg>
